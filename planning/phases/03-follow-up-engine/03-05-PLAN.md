# 03-05 Plan - Follow-Up Template and Notification Reliability

**Owner:** [JUNIOR-DEV]  
**Phase:** 3 - Follow-Up Engine  
**Status:** Completed (2026-03-01)

## Scope

Normalize follow-up template keys, unify estimate/follow-up actions, and harden local notification scheduling behavior.

## Files Touched

- `flutter_app/lib/core/services/lead_actions_service.dart`
- `flutter_app/lib/core/notifications/notification_service.dart`
- `flutter_app/lib/features/followups/followup_settings_screen.dart`
- `flutter_app/lib/features/home/home_screen.dart`
- `flutter_app/lib/features/leads/leads_screen.dart`
- `flutter_app/lib/features/leads/lead_detail_screen.dart`
- `supabase/migrations/20260304_000004_normalize_followup_template_keys.sql`

## Acceptance Criteria

- Canonical template keys (`day_2_followup`, `day_5_followup`, `day_10_followup`) are used in UI and DB migration.
- Marking estimate sent from any lead surface uses shared service behavior.
- Pause/stop follow-up actions apply consistent notification cancellation behavior.
- Notification service configures timezone + permissions safely and idempotently.
