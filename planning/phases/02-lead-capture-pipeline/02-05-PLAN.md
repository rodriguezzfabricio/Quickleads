# 02-05 Plan - Device Registration and Sync Hardening

**Owner:** [JUNIOR-DEV]  
**Phase:** 2 - Lead Capture & Pipeline  
**Status:** Completed (2026-03-01)

## Scope

Replace placeholder sync device identity with per-device registration and align outbox sync entity handling for template edits.

## Files Touched

- `flutter_app/lib/core/sync/device_registration_service.dart`
- `flutter_app/lib/core/sync/sync_engine.dart`
- `flutter_app/lib/core/storage/daos/templates_dao.dart`
- `supabase/functions/sync-push/index.ts`
- `supabase/migrations/20260302_000003_extend_sync_mutation_entity_types.sql`

## Acceptance Criteria

- Sync engine no longer sends hardcoded placeholder UUID as `device_id`.
- Device registration is attempted for authenticated users and persisted locally.
- Template edits enqueue outbox entries and are accepted by `sync-push` entity validation.
- Sync mutation DB constraint allows `message_template` entity type.
